options func only takes current map, fix it